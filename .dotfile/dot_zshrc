# --- Proxy Settings ---
alias proxy="export http_proxy='http://127.0.0.1:7890'; export https_proxy='http://127.0.0.1:7890'; export HTTP_PROXY='http://127.0.0.1:7890'; export HTTPS_PROXY='http://127.0.0.1:7890'; echo 'Proxy ON'"
alias unproxy="unset http_proxy https_proxy HTTP_PROXY HTTPS_PROXY; echo 'Proxy OFF'"

proxy

# --- Environment ---
# 提前禁用这个在 MSYS2 下会报错的后端
# export POWERLEVEL9K_DISABLE_GITSTATUS=true

# --- Sheldon ---
# 替换掉原来的手动 source 插件部分
eval "$(sheldon source)"

# --- Theme Config ---
# 加载你自定义的 p10k 样式
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# --- Zsh Settings ---
colorscript -r
HISTFILE=~/.histfile
HISTSIZE=10000
SAVEHIST=10000

autoload -Uz compinit
compinit

setopt autocd 
setopt promptsubst 
setopt MENU_COMPLETE 
setopt AUTO_LIST 
setopt COMPLETE_IN_WORD 
setopt SHARE_HISTORY
setopt HIST_EXPIRE_DUPS_FIRST
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_FIND_NO_DUPS
setopt HIST_SAVE_NO_DUPS

unsetopt BEEP

# Keybindings
bindkey '\e[A' history-substring-search-up
bindkey '\e[B' history-substring-search-down

# --- Alias & functions ---
alias ls='eza -a --icons --group-directories-first --ignore-glob="NTUSER*|ntuser*"'
alias ll='eza -l -a --icons --group-directories-first --ignore-glob="NTUSER*|ntuser*"'
alias winfetch='powershell winfetch'
alias update='winget upgrade --all && pacman -Syu --noconfirm'
alias btop='~/.local/bin/btop/btop4win.exe'
alias rice='~/.rice-manager/rice.sh'
alias wallpaper='~/.rice-manager/wallpaper.sh'
alias ala='alacritty --working-directory=$(pwd) & disown'
alias cmsp='cd $(chezmoi source-path)/..'

cd() {
    builtin cd "$@" && ls;
}